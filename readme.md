# Welcome to this project

This project aims to create a message exchange service which utilises distributed systems which runs replicas of the server and database layer.
Messages will also be encrypted before and decrypted after send, obfuscating the information sent.

## How it works

This project aims as described above to create a messaging application where the server layer is replicated. The data is encrypted using end-to-end encryption. For these functionalities the most important dependencies are:

**Node.js server**

-   Express.js
-   Socket.io
-   Crypto
-   Redis

**Python server**

-   Flask
-   Flask_socketio
-   Cryptography
-   Redis

**Svelte client**

-   Svelte
-   Socket.io

There are some other dependencies but these are more nice-to-haves for instace for displaying dates in a nice way, they are not necessary to achieve the stated goal.

The end-to-end encryption works by generating a public key for encrypting data and a private key for decrypting data using the RSA algorithm.
It is a little like a key that is used for opening something but cannot close it, and another key which can only close something but not open.
These keys are generated by the client and the server, then the public key which is used for encrypting is exchanged. This means that each side is able to encrypt data in a way that the other can decrypt since it has the private key for decryption.
This concept is a very basic and secure method of implementing end-to-end encryption

## How to run

To run this project some tools are needed which are:

-   npm
-   docker

To run this project follow the steps below (with docker compose):

-   Navigate to the client folder using `cd client`
-   Install all npm dependencies using `npm install`
-   Build the client using `npm run build`
-   Navigate back to the root using `cd ..`
-   Build the docker containers using `docker compose build`
-   Start the docker containers using `docker compose up -d`
-   Marvel at the wonders of this applications

To run this project in development mode follow the following steps

-   Start the redis docker container using `docker run --publish=6379:6379 --name=ressilient-hosting-db -d redis`
-   Navigate to the client folder using `cd client`
-   Install all npm dependencies using `npm install`
-   Run the client using `npm run dev`
-   Open a new terminal
-   Navigate back to the server using `cd server`
-   Install all npm dependencies using `npm install`
-   Run the client using `npm run dev`

To run in distributed mode the container have to be built separately since the image have to be send to the systems in the swarm and the files are not shared.
To do this run

-   `docker build . -t message-exchange-server` in the `server` folder
-   `docker build . -t message-exchange-proxy` in the `proxy` folder

## Todos

-   [ ] Check if all requests are correctly send to all replicas (from different users)
-   [ ] Run containers on different devices
